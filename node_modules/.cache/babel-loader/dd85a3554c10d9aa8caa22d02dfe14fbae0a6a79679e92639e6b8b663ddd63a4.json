{"ast":null,"code":"var _jsxFileName = \"/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/page/EditProfilePage.js\",\n  _s = $RefreshSig$();\nimport { useTokenContext } from \"../context/TokenContext\";\nimport Avatar from \"../components/Avatar\";\nimport getTimeAgo from \"../utils/getTimeAgo\";\nimport { useState } from \"react\";\nimport Modal from \"../components/Modal/index\";\nimport { toast } from \"react-toastify\";\nimport { Navigate, NavLink } from \"react-router-dom\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst navigate = useNavigate();\nconst EditProfilePage = () => {\n  _s();\n  const {\n    loggedUser\n  } = useTokenContext();\n  const {\n    username,\n    createdAt,\n    email\n  } = loggedUser;\n  const [showModal, setShowModal] = useState(false);\n  const [cambioContraseña, setCambioContraseña] = useState(false);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \" Profile \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Nombre de Usuario:\", username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"email: \", email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" se uni\\xF3: \", getTimeAgo(new Date(createdAt))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowModal(true);\n        },\n        children: \"Cambiar contrase\\xF1a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      setShowModal: setShowModal,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Se te va a enviar un email con un c\\xF3digo para cambiar la contrase\\xF1a. \\xBFEst\\xE1s seguro de qu\\xE9 quieres modificarla?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowModal(false);\n        },\n        children: \"Cancelar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        //fetch para solicitar que te envíe un correo con una nueva contraseña\n        onClick: async () => {\n          try {\n            const res = await fetch(\"http://localhost:4000/users/password/recover\", {\n              method: \"POST\",\n              body: JSON.stringify({\n                email\n              }),\n              headers: {\n                \"Content-Type\": \"application/json\"\n              }\n            });\n            const body = await res.json();\n            console.log(body);\n            if (!res.ok) {\n              throw new Error(body.message);\n            }\n\n            // setCambioContraseña(true);\n            navigate;\n            toast.success(body.message);\n          } catch (error) {\n            console.error(error);\n            toast.error(error.message);\n          } finally {\n            setShowModal(false);\n          }\n        },\n        children: \"S\\xED, cambiar contrase\\xF1a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n};\n_s(EditProfilePage, \"+w5ZxnSKTvTB7idq/8r0LK44Hrw=\", false, function () {\n  return [useTokenContext];\n});\n_c = EditProfilePage;\nexport default EditProfilePage;\nvar _c;\n$RefreshReg$(_c, \"EditProfilePage\");","map":{"version":3,"names":["useTokenContext","Avatar","getTimeAgo","useState","Modal","toast","Navigate","NavLink","useParams","useNavigate","navigate","EditProfilePage","loggedUser","username","createdAt","email","showModal","setShowModal","cambioContraseña","setCambioContraseña","Date","res","fetch","method","body","JSON","stringify","headers","json","console","log","ok","Error","message","success","error"],"sources":["/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/page/EditProfilePage.js"],"sourcesContent":["import { useTokenContext } from \"../context/TokenContext\";\nimport Avatar from \"../components/Avatar\";\nimport getTimeAgo from \"../utils/getTimeAgo\";\nimport { useState } from \"react\";\nimport Modal from \"../components/Modal/index\";\nimport { toast } from \"react-toastify\";\nimport { Navigate, NavLink } from \"react-router-dom\";\nimport { useParams, useNavigate } from \"react-router-dom\";\n\nconst navigate = useNavigate();\n\nconst EditProfilePage = () => {\n  const { loggedUser } = useTokenContext();\n  const { username, createdAt, email } = loggedUser;\n\n  const [showModal, setShowModal] = useState(false);\n  const [cambioContraseña, setCambioContraseña] = useState(false);\n\n  return (\n    <section>\n      <h2> Profile </h2>\n      <article>\n        <Avatar />\n        <h3>Nombre de Usuario:{username}</h3>\n        <h4>email: {email}</h4>\n        <p> se unió: {getTimeAgo(new Date(createdAt))}</p>\n        <button\n          onClick={() => {\n            setShowModal(true);\n          }}\n        >\n          Cambiar contraseña\n        </button>\n      </article>\n      {showModal && (\n        <Modal setShowModal={setShowModal}>\n          <p>\n            Se te va a enviar un email con un código para cambiar la contraseña.\n            ¿Estás seguro de qué quieres modificarla?\n          </p>\n\n          <button\n            onClick={() => {\n              setShowModal(false);\n            }}\n          >\n            Cancelar\n          </button>\n\n          <button\n            //fetch para solicitar que te envíe un correo con una nueva contraseña\n            onClick={async () => {\n              try {\n                const res = await fetch(\n                  \"http://localhost:4000/users/password/recover\",\n                  {\n                    method: \"POST\",\n                    body: JSON.stringify({ email }),\n                    headers: { \"Content-Type\": \"application/json\" },\n                  }\n                );\n\n                const body = await res.json();\n                console.log(body);\n\n                if (!res.ok) {\n                  throw new Error(body.message);\n                }\n\n                // setCambioContraseña(true);\n                navigate;\n\n                toast.success(body.message);\n              } catch (error) {\n                console.error(error);\n                toast.error(error.message);\n              } finally {\n                setShowModal(false);\n              }\n            }}\n          >\n            Sí, cambiar contraseña\n          </button>\n        </Modal>\n      )}{\" \"}\n    </section>\n  );\n};\n\nexport default EditProfilePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}