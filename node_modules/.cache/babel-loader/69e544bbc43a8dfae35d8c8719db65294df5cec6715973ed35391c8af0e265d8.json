{"ast":null,"code":"var _jsxFileName = \"/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/CommentForm/index.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useTokenContext } from \"../../context/TokenContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentForm = (idPost, setShowCommentModal) => {\n  _s();\n  const [text, setText] = useState(\"\");\n  const {\n    token\n  } = useTokenContext();\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onClick: async e => {\n      try {\n        e.preventDefault();\n        const res = await fetch(`http://localhost:4000/posts/${idPost}/coments`, {\n          method: \"POST\",\n          headers: {\n            Authorization: token,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            text: text\n          })\n        });\n        const body = await res.json();\n        console.log(\"body.data6\", body);\n        if (!res.ok) {\n          throw new Error(body.message);\n        }\n\n        // addCommentToPost({\n        //   id: idPost,\n        //   newAvg: body.data.rate,\n        //   valueRated: currentStar,\n        // });\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setShowModal(false);\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"text\",\n      children: [\"Deja un comentario\", \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"text\",\n      value: text,\n      onChange: event => {\n        setText(event.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Buscar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentForm, \"8x9dfFjp0FUBSZsOaDJwPKAiklw=\", false, function () {\n  return [useTokenContext];\n});\n_c = CommentForm;\nexport default CommentForm;\nvar _c;\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"names":["useState","useTokenContext","CommentForm","idPost","setShowCommentModal","text","setText","token","e","preventDefault","res","fetch","method","headers","Authorization","body","JSON","stringify","json","console","log","ok","Error","message","error","setShowModal","event","target","value"],"sources":["/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/CommentForm/index.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useTokenContext } from \"../../context/TokenContext\";\n\nconst CommentForm = (idPost, setShowCommentModal) => {\n  const [text, setText] = useState(\"\");\n  const { token } = useTokenContext();\n\n  return (\n    <form\n      onClick={async (e) => {\n        try {\n          e.preventDefault();\n\n          const res = await fetch(\n            `http://localhost:4000/posts/${idPost}/coments`,\n            {\n              method: \"POST\",\n              headers: {\n                Authorization: token,\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({ text: text }),\n            }\n          );\n\n          const body = await res.json();\n          console.log(\"body.data6\", body);\n\n          if (!res.ok) {\n            throw new Error(body.message);\n          }\n\n          // addCommentToPost({\n          //   id: idPost,\n          //   newAvg: body.data.rate,\n          //   valueRated: currentStar,\n          // });\n        } catch (error) {\n          console.error(error);\n        } finally {\n          setShowModal(false);\n        }\n      }}\n    >\n      <label htmlFor=\"text\">\n        Deja un comentario\n        {/* (m√°s adelante ternario con post.comets<0 \"se el primero\") */}:\n      </label>\n      <input\n        id=\"text\"\n        value={text}\n        onChange={(event) => {\n          setText(event.target.value);\n        }}\n      />\n\n      <button>Buscar</button>\n    </form>\n  );\n};\n\nexport default CommentForm;\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,eAAe,QAAQ,4BAA4B;AAAC;AAE7D,MAAMC,WAAW,GAAG,CAACC,MAAM,EAAEC,mBAAmB,KAAK;EAAA;EACnD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM;IAAEO;EAAM,CAAC,GAAGN,eAAe,EAAE;EAEnC,oBACE;IACE,OAAO,EAAE,MAAOO,CAAC,IAAK;MACpB,IAAI;QACFA,CAAC,CAACC,cAAc,EAAE;QAElB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CACpB,+BAA8BR,MAAO,UAAS,EAC/C;UACES,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACPC,aAAa,EAAEP,KAAK;YACpB,cAAc,EAAE;UAClB,CAAC;UACDQ,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEZ,IAAI,EAAEA;UAAK,CAAC;QACrC,CAAC,CACF;QAED,MAAMU,IAAI,GAAG,MAAML,GAAG,CAACQ,IAAI,EAAE;QAC7BC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEL,IAAI,CAAC;QAE/B,IAAI,CAACL,GAAG,CAACW,EAAE,EAAE;UACX,MAAM,IAAIC,KAAK,CAACP,IAAI,CAACQ,OAAO,CAAC;QAC/B;;QAEA;QACA;QACA;QACA;QACA;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdL,OAAO,CAACK,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,SAAS;QACRC,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAE;IAAA,wBAEF;MAAO,OAAO,EAAC,MAAM;MAAA,WAAC,oBAEpB,EAAiE,GACnE;IAAA;MAAA;MAAA;MAAA;IAAA,QAAQ,eACR;MACE,EAAE,EAAC,MAAM;MACT,KAAK,EAAEpB,IAAK;MACZ,QAAQ,EAAGqB,KAAK,IAAK;QACnBpB,OAAO,CAACoB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;MAC7B;IAAE;MAAA;MAAA;MAAA;IAAA,QACF,eAEF;MAAA,UAAQ;IAAM;MAAA;MAAA;MAAA;IAAA,QAAS;EAAA;IAAA;IAAA;IAAA;EAAA,QAClB;AAEX,CAAC;AAAC,GAxDI1B,WAAW;EAAA,QAEGD,eAAe;AAAA;AAAA,KAF7BC,WAAW;AA0DjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}