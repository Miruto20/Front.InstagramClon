{"ast":null,"code":"var _jsxFileName = \"/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/DeletePost/index.js\",\n  _s = $RefreshSig$();\nimport \"./style.css\";\nimport { useTokenContext } from \"../../context/TokenContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeletePost = _ref => {\n  _s();\n  let {\n    idUser,\n    idPost,\n    setShowBorrarModal,\n    posts,\n    setPosts\n  } = _ref;\n  const navigate = useNavigate();\n  const {\n    token\n  } = useTokenContext();\n  useEffect(() => {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      //fetch para solicitar que te envíe un correo con una nueva contraseña\n      onClick: async () => {\n        try {\n          const res = await fetch(`http://localhost:4000/posts/${idPost}`, {\n            method: \"DELETE\",\n            body: JSON.stringify({\n              idUser,\n              idPost\n            }),\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: token\n            }\n          });\n          const body = await res.json();\n          console.log(body);\n          if (!res.ok) {\n            throw new Error(body.message);\n          }\n\n          // setCambioContraseña(true);\n          navigate(\"/\");\n          setPosts([...posts]);\n          console.log(\"body.data.posts\", body.data.posts);\n          setPosts(body.data.posts.filter(post => post.id !== idPost));\n          toast.success(body.message);\n        } catch (error) {\n          console.error(error);\n          toast.error(error.message);\n        } finally {\n          setShowBorrarModal(false);\n        }\n      },\n      children: \"Borrar Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this);\n  }, [posts]);\n};\n_s(DeletePost, \"sTq/eBBwwzjoRC+cbjaYCYIKNfU=\", false, function () {\n  return [useNavigate, useTokenContext];\n});\n_c = DeletePost;\nexport default DeletePost;\nvar _c;\n$RefreshReg$(_c, \"DeletePost\");","map":{"version":3,"names":["useTokenContext","useNavigate","toast","useEffect","DeletePost","idUser","idPost","setShowBorrarModal","posts","setPosts","navigate","token","res","fetch","method","body","JSON","stringify","headers","Authorization","json","console","log","ok","Error","message","data","filter","post","id","success","error"],"sources":["/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/DeletePost/index.js"],"sourcesContent":["import \"./style.css\";\nimport { useTokenContext } from \"../../context/TokenContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useEffect } from \"react\";\n\nconst DeletePost = ({\n  idUser,\n  idPost,\n  setShowBorrarModal,\n  posts,\n  setPosts,\n}) => {\n  const navigate = useNavigate();\n\n  const { token } = useTokenContext();\n\n  useEffect(() => {\n    return (\n      <button\n        //fetch para solicitar que te envíe un correo con una nueva contraseña\n        onClick={async () => {\n          try {\n            const res = await fetch(`http://localhost:4000/posts/${idPost}`, {\n              method: \"DELETE\",\n              body: JSON.stringify({ idUser, idPost }),\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Authorization: token,\n              },\n            });\n\n            const body = await res.json();\n            console.log(body);\n\n            if (!res.ok) {\n              throw new Error(body.message);\n            }\n\n            // setCambioContraseña(true);\n            navigate(\"/\");\n            setPosts([...posts]);\n            console.log(\"body.data.posts\", body.data.posts);\n\n            setPosts(body.data.posts.filter((post) => post.id !== idPost));\n\n            toast.success(body.message);\n          } catch (error) {\n            console.error(error);\n            toast.error(error.message);\n          } finally {\n            setShowBorrarModal(false);\n          }\n        }}\n      >\n        Borrar Post\n      </button>\n    );\n  }, [posts]);\n};\n\nexport default DeletePost;\n"],"mappings":";;AAAA,OAAO,aAAa;AACpB,SAASA,eAAe,QAAQ,4BAA4B;AAC5D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,SAAS,QAAQ,OAAO;AAAC;AAElC,MAAMC,UAAU,GAAG,QAMb;EAAA;EAAA,IANc;IAClBC,MAAM;IACNC,MAAM;IACNC,kBAAkB;IAClBC,KAAK;IACLC;EACF,CAAC;EACC,MAAMC,QAAQ,GAAGT,WAAW,EAAE;EAE9B,MAAM;IAAEU;EAAM,CAAC,GAAGX,eAAe,EAAE;EAEnCG,SAAS,CAAC,MAAM;IACd,oBACE;MACE;MACA,OAAO,EAAE,YAAY;QACnB,IAAI;UACF,MAAMS,GAAG,GAAG,MAAMC,KAAK,CAAE,+BAA8BP,MAAO,EAAC,EAAE;YAC/DQ,MAAM,EAAE,QAAQ;YAChBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;cAAEZ,MAAM;cAAEC;YAAO,CAAC,CAAC;YACxCY,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClCC,aAAa,EAAER;YACjB;UACF,CAAC,CAAC;UAEF,MAAMI,IAAI,GAAG,MAAMH,GAAG,CAACQ,IAAI,EAAE;UAC7BC,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;UAEjB,IAAI,CAACH,GAAG,CAACW,EAAE,EAAE;YACX,MAAM,IAAIC,KAAK,CAACT,IAAI,CAACU,OAAO,CAAC;UAC/B;;UAEA;UACAf,QAAQ,CAAC,GAAG,CAAC;UACbD,QAAQ,CAAC,CAAC,GAAGD,KAAK,CAAC,CAAC;UACpBa,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEP,IAAI,CAACW,IAAI,CAAClB,KAAK,CAAC;UAE/CC,QAAQ,CAACM,IAAI,CAACW,IAAI,CAAClB,KAAK,CAACmB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKvB,MAAM,CAAC,CAAC;UAE9DJ,KAAK,CAAC4B,OAAO,CAACf,IAAI,CAACU,OAAO,CAAC;QAC7B,CAAC,CAAC,OAAOM,KAAK,EAAE;UACdV,OAAO,CAACU,KAAK,CAACA,KAAK,CAAC;UACpB7B,KAAK,CAAC6B,KAAK,CAACA,KAAK,CAACN,OAAO,CAAC;QAC5B,CAAC,SAAS;UACRlB,kBAAkB,CAAC,KAAK,CAAC;QAC3B;MACF,CAAE;MAAA,UACH;IAED;MAAA;MAAA;MAAA;IAAA,QAAS;EAEb,CAAC,EAAE,CAACC,KAAK,CAAC,CAAC;AACb,CAAC;AAAC,GArDIJ,UAAU;EAAA,QAOGH,WAAW,EAEVD,eAAe;AAAA;AAAA,KAT7BI,UAAU;AAuDhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}