{"ast":null,"code":"var _jsxFileName = \"/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/CommentForm/index.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useTokenContext } from \"../../context/TokenContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentForm = _ref => {\n  _s();\n  let {\n    idPost,\n    idUser\n  } = _ref;\n  const [text, setText] = useState(\"\");\n  const {\n    token,\n    loggedUser\n  } = useTokenContext();\n  console.log(\"id3\", idPost);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onClick: async e => {\n      try {\n        e.preventDefault();\n        console.log(\"idPostCommCompo\", idUser);\n        const res = await fetch(`http://localhost:4000/posts/${idPost}/coments`, {\n          method: \"POST\",\n          headers: {\n            Authorization: token,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            text,\n            idUser,\n            idPost\n          })\n        });\n        const body = await res.json();\n        console.log(\"body.data6\", body);\n        if (!res.ok) {\n          throw new Error(body.message);\n        }\n\n        // addCommentToPost({\n        //   id: idPost,\n        //   newAvg: body.data.rate,\n        //   valueRated: currentStar,\n        // });\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"text\",\n      children: [\"Deja un comentario\", \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"text\",\n      type: \"text\",\n      value: text,\n      required: true,\n      onChange: event => {\n        setText(event.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Enviar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentForm, \"AWoQ3Okfs9gwBNXrMDEyN10d09Q=\", false, function () {\n  return [useTokenContext];\n});\n_c = CommentForm;\nexport default CommentForm;\nvar _c;\n$RefreshReg$(_c, \"CommentForm\");","map":{"version":3,"names":["useState","useTokenContext","CommentForm","idPost","idUser","text","setText","token","loggedUser","console","log","e","preventDefault","res","fetch","method","headers","Authorization","body","JSON","stringify","json","ok","Error","message","error","event","target","value"],"sources":["/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/CommentForm/index.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useTokenContext } from \"../../context/TokenContext\";\n\nconst CommentForm = ({ idPost, idUser }) => {\n  const [text, setText] = useState(\"\");\n  const { token, loggedUser } = useTokenContext();\n  console.log(\"id3\", idPost);\n\n  return (\n    <form\n      onClick={async (e) => {\n        try {\n          e.preventDefault();\n          console.log(\"idPostCommCompo\", idUser);\n\n          const res = await fetch(\n            `http://localhost:4000/posts/${idPost}/coments`,\n            {\n              method: \"POST\",\n              headers: {\n                Authorization: token,\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({ text, idUser, idPost }),\n            }\n          );\n\n          const body = await res.json();\n          console.log(\"body.data6\", body);\n\n          if (!res.ok) {\n            throw new Error(body.message);\n          }\n\n          // addCommentToPost({\n          //   id: idPost,\n          //   newAvg: body.data.rate,\n          //   valueRated: currentStar,\n          // });\n        } catch (error) {\n          console.error(error);\n        }\n      }}\n    >\n      <label htmlFor=\"text\">\n        Deja un comentario\n        {/* (m√°s adelante ternario con post.comets<0 \"se el primero\") */}:\n      </label>\n      <input\n        id=\"text\"\n        type=\"text\"\n        value={text}\n        required\n        onChange={(event) => {\n          setText(event.target.value);\n        }}\n      />\n\n      <button>Enviar</button>\n    </form>\n  );\n};\n\nexport default CommentForm;\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,eAAe,QAAQ,4BAA4B;AAAC;AAE7D,MAAMC,WAAW,GAAG,QAAwB;EAAA;EAAA,IAAvB;IAAEC,MAAM;IAAEC;EAAO,CAAC;EACrC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM;IAAEO,KAAK;IAAEC;EAAW,CAAC,GAAGP,eAAe,EAAE;EAC/CQ,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEP,MAAM,CAAC;EAE1B,oBACE;IACE,OAAO,EAAE,MAAOQ,CAAC,IAAK;MACpB,IAAI;QACFA,CAAC,CAACC,cAAc,EAAE;QAClBH,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEN,MAAM,CAAC;QAEtC,MAAMS,GAAG,GAAG,MAAMC,KAAK,CACpB,+BAA8BX,MAAO,UAAS,EAC/C;UACEY,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACPC,aAAa,EAAEV,KAAK;YACpB,cAAc,EAAE;UAClB,CAAC;UACDW,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEf,IAAI;YAAED,MAAM;YAAED;UAAO,CAAC;QAC/C,CAAC,CACF;QAED,MAAMe,IAAI,GAAG,MAAML,GAAG,CAACQ,IAAI,EAAE;QAC7BZ,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEQ,IAAI,CAAC;QAE/B,IAAI,CAACL,GAAG,CAACS,EAAE,EAAE;UACX,MAAM,IAAIC,KAAK,CAACL,IAAI,CAACM,OAAO,CAAC;QAC/B;;QAEA;QACA;QACA;QACA;QACA;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdhB,OAAO,CAACgB,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAE;IAAA,wBAEF;MAAO,OAAO,EAAC,MAAM;MAAA,WAAC,oBAEpB,EAAiE,GACnE;IAAA;MAAA;MAAA;MAAA;IAAA,QAAQ,eACR;MACE,EAAE,EAAC,MAAM;MACT,IAAI,EAAC,MAAM;MACX,KAAK,EAAEpB,IAAK;MACZ,QAAQ;MACR,QAAQ,EAAGqB,KAAK,IAAK;QACnBpB,OAAO,CAACoB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;MAC7B;IAAE;MAAA;MAAA;MAAA;IAAA,QACF,eAEF;MAAA,UAAQ;IAAM;MAAA;MAAA;MAAA;IAAA,QAAS;EAAA;IAAA;IAAA;IAAA;EAAA,QAClB;AAEX,CAAC;AAAC,GA1DI1B,WAAW;EAAA,QAEeD,eAAe;AAAA;AAAA,KAFzCC,WAAW;AA4DjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}