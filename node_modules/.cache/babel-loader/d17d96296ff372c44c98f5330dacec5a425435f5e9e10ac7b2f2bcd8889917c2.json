{"ast":null,"code":"var _jsxFileName = \"/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/DeletePost/index.js\",\n  _s = $RefreshSig$();\nimport \"./style.css\";\nimport { useTokenContext } from \"../../context/TokenContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useEffect } from \"react\";\nimport usePosts from \"../../hooks/usePosts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeletePost = _ref => {\n  _s();\n  let {\n    idUser,\n    idPost,\n    setShowBorrarModal\n  } = _ref;\n  const navigate = useNavigate();\n  const {\n    token\n  } = useTokenContext();\n  const {\n    posts,\n    setPosts\n  } = usePosts();\n\n  // useEffect(() => {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    //fetch para solicitar que te envíe un correo con una nueva contraseña\n    onClick: async () => {\n      try {\n        const res = await fetch(`http://localhost:4000/posts/${idPost}`, {\n          method: \"DELETE\",\n          body: JSON.stringify({\n            idUser,\n            idPost\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: token\n          }\n        });\n        const body = await res.json();\n        console.log(body);\n        if (!res.ok) {\n          throw new Error(body.message);\n        }\n        let posts2 = posts.filter(post => post.id !== idPost);\n        setPosts(...posts2);\n        console.log(\"body.data.posts\", body.data.posts);\n        setPosts(body.data.posts);\n        navigate(\"/\");\n        toast.success(body.message);\n      } catch (error) {\n        console.error(error);\n        toast.error(error.message);\n      } finally {\n        setShowBorrarModal(false);\n      }\n    },\n    children: \"Borrar Post\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n};\n// }, [posts]);\n// };\n_s(DeletePost, \"X090/lw0fFHxqFjojkr3pQ35Jc4=\", false, function () {\n  return [useNavigate, useTokenContext, usePosts];\n});\n_c = DeletePost;\nexport default DeletePost;\nvar _c;\n$RefreshReg$(_c, \"DeletePost\");","map":{"version":3,"names":["useTokenContext","useNavigate","toast","useEffect","usePosts","DeletePost","idUser","idPost","setShowBorrarModal","navigate","token","posts","setPosts","res","fetch","method","body","JSON","stringify","headers","Authorization","json","console","log","ok","Error","message","posts2","filter","post","id","data","success","error"],"sources":["/home/miruto20/Documents/Proyectos/instagram.Proy.Beta.Front/front.instagram/src/components/DeletePost/index.js"],"sourcesContent":["import \"./style.css\";\nimport { useTokenContext } from \"../../context/TokenContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useEffect } from \"react\";\nimport usePosts from \"../../hooks/usePosts\";\n\nconst DeletePost = ({ idUser, idPost, setShowBorrarModal }) => {\n  const navigate = useNavigate();\n\n  const { token } = useTokenContext();\n  const { posts, setPosts } = usePosts();\n\n  // useEffect(() => {\n  return (\n    <button\n      //fetch para solicitar que te envíe un correo con una nueva contraseña\n      onClick={async () => {\n        try {\n          const res = await fetch(`http://localhost:4000/posts/${idPost}`, {\n            method: \"DELETE\",\n            body: JSON.stringify({ idUser, idPost }),\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: token,\n            },\n          });\n\n          const body = await res.json();\n          console.log(body);\n\n          if (!res.ok) {\n            throw new Error(body.message);\n          }\n\n          let posts2 = posts.filter((post) => post.id !== idPost);\n          setPosts(...posts2);\n\n          console.log(\"body.data.posts\", body.data.posts);\n          setPosts(body.data.posts);\n          navigate(\"/\");\n          toast.success(body.message);\n        } catch (error) {\n          console.error(error);\n          toast.error(error.message);\n        } finally {\n          setShowBorrarModal(false);\n        }\n      }}\n    >\n      Borrar Post\n    </button>\n  );\n};\n// }, [posts]);\n// };\n\nexport default DeletePost;\n"],"mappings":";;AAAA,OAAO,aAAa;AACpB,SAASA,eAAe,QAAQ,4BAA4B;AAC5D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,SAAS,QAAQ,OAAO;AACjC,OAAOC,QAAQ,MAAM,sBAAsB;AAAC;AAE5C,MAAMC,UAAU,GAAG,QAA4C;EAAA;EAAA,IAA3C;IAAEC,MAAM;IAAEC,MAAM;IAAEC;EAAmB,CAAC;EACxD,MAAMC,QAAQ,GAAGR,WAAW,EAAE;EAE9B,MAAM;IAAES;EAAM,CAAC,GAAGV,eAAe,EAAE;EACnC,MAAM;IAAEW,KAAK;IAAEC;EAAS,CAAC,GAAGR,QAAQ,EAAE;;EAEtC;EACA,oBACE;IACE;IACA,OAAO,EAAE,YAAY;MACnB,IAAI;QACF,MAAMS,GAAG,GAAG,MAAMC,KAAK,CAAE,+BAA8BP,MAAO,EAAC,EAAE;UAC/DQ,MAAM,EAAE,QAAQ;UAChBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEZ,MAAM;YAAEC;UAAO,CAAC,CAAC;UACxCY,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAEV;UACjB;QACF,CAAC,CAAC;QAEF,MAAMM,IAAI,GAAG,MAAMH,GAAG,CAACQ,IAAI,EAAE;QAC7BC,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;QAEjB,IAAI,CAACH,GAAG,CAACW,EAAE,EAAE;UACX,MAAM,IAAIC,KAAK,CAACT,IAAI,CAACU,OAAO,CAAC;QAC/B;QAEA,IAAIC,MAAM,GAAGhB,KAAK,CAACiB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKvB,MAAM,CAAC;QACvDK,QAAQ,CAAC,GAAGe,MAAM,CAAC;QAEnBL,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEP,IAAI,CAACe,IAAI,CAACpB,KAAK,CAAC;QAC/CC,QAAQ,CAACI,IAAI,CAACe,IAAI,CAACpB,KAAK,CAAC;QACzBF,QAAQ,CAAC,GAAG,CAAC;QACbP,KAAK,CAAC8B,OAAO,CAAChB,IAAI,CAACU,OAAO,CAAC;MAC7B,CAAC,CAAC,OAAOO,KAAK,EAAE;QACdX,OAAO,CAACW,KAAK,CAACA,KAAK,CAAC;QACpB/B,KAAK,CAAC+B,KAAK,CAACA,KAAK,CAACP,OAAO,CAAC;MAC5B,CAAC,SAAS;QACRlB,kBAAkB,CAAC,KAAK,CAAC;MAC3B;IACF,CAAE;IAAA,UACH;EAED;IAAA;IAAA;IAAA;EAAA,QAAS;AAEb,CAAC;AACD;AACA;AAAA,GAhDMH,UAAU;EAAA,QACGJ,WAAW,EAEVD,eAAe,EACLI,QAAQ;AAAA;AAAA,KAJhCC,UAAU;AAkDhB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}